<%- include("partials/header.ejs") %>
<body>
    <div class="container">
        <div class="row">
          <div class="col-4 mt-5 pt-2">
            <% searchedBook.forEach(book => { %>
            <div class="position-relative d-inline-block">
              <img src="<%= book.cover_id ? `https://covers.openlibrary.org/b/id/${book.cover_id}-M.jpg` : '/images/book-1.png' %>" width="250px" height="300px" alt="<%= book.title %>">
              <button
                class="btn btn-light btn-sm position-absolute top-0 end-0 m-2 favorite-btn"
                data-title="<%= book.title %>"
                data-author="<%= book.authors_name %>"
                data-cover-id="<%= book.cover_id %>"
                aria-label="Add to favorites"
              >
                <svg class="favorite-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8z"/></svg>
              </button>
            </div>
          </div>
          <div class="col-1">
          </div>
          <div class="col-6 mt-5 pt-3">
            
                        <div class="">
                            <h5 class="white">Title: <%= book.title %></h5>
                            <p class="white">First Published: <%= book.first_publish_year %></p>
                            <p class="white">Author: <%= book.authors_name %></p>
                            
                            <p class="white">Numbers of Pages: <%= book.pages || 'N/A' %></p>
                            <p class="white">Published at:
                              <% if (Array.isArray(book.publish_Place) && book.publish_Place.length) { %>
                                <% book.publish_Place.slice(0, 5).forEach((place, index) => { %>
                                  <%= place %><%= index < 4 && index < book.publish_Place.length - 1 ? ', ' : '' %>
                                <% }) %>
                                <% if (book.publish_Place.length > 5) { %>...<% } %>
                              <% } else { %>
                                N/A
                              <% } %>
                            </p>
                            <p class="white">Rating: <%= (book.averageRating !== undefined && book.averageRating !== null) ? book.averageRating : 'N/A' %></p>
                            <p class="white">Language:
                              <% if (Array.isArray(book.language) && book.language.length) { %>
                                <% book.language.slice(0, 10).forEach((lang, index) => { %>
                                  <%= lang %><%= index < 4 && index < book.language.length - 1 ? ', ' : '' %>
                                <% }) %>
                                <% if (book.language.length > 5) { %>...<% } %>
                              <% } else { %>
                                N/A
                              <% } %>
                            </p>
                        </div>          
            <% }) %>
          </div>
        </div>
      </div>
</body>
<%- include("partials/footer.ejs") %>
